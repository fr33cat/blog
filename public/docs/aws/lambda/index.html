<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="How to Pentest AWS Lambda Functions #  AWS Lambda is a serverless computing service that allows you to run code without provisioning or managing servers. Lambda functions can be triggered by various events, such as HTTP requests, S3 bucket changes, DynamoDB streams, etc. Lambda functions can also access other AWS services and resources through IAM roles and policies.
Pentesting AWS Lambda functions can be challenging, as they are ephemeral, scalable, and isolated.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="How to Pentest AWS Lambda Functions #  AWS Lambda is a serverless computing service that allows you to run code without provisioning or managing servers. Lambda functions can be triggered by various events, such as HTTP requests, S3 bucket changes, DynamoDB streams, etc. Lambda functions can also access other AWS services and resources through IAM roles and policies.
Pentesting AWS Lambda functions can be challenging, as they are ephemeral, scalable, and isolated." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://fr33cat.github.io/docs/aws/lambda/" />

<title>Lambda | fr33cat.github.io</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.e7f37fe6627bb0082cb1b0b9ae15c3938017238a72448c8464c197a5611ed191.css" integrity="sha256-5/N/5mJ7sAgssbC5rhXDk4AXI4pyRIyEZMGXpWEe0ZE=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.0c59329640e2c403b9feceac89a8d84774c7f8744194f8f97b0dea302c8c0850.js" integrity="sha256-DFkylkDixAO5/s6siajYR3TH&#43;HRBlPj5ew3qMCyMCFA=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>fr33cat.github.io</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-71735f978fdcae7d491e70c2ce0ff094" class="toggle" checked />
    <label for="section-71735f978fdcae7d491e70c2ce0ff094" class="flex justify-between">
      <a href="/docs/aws/" class="">AWS</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/aws/ec2/" class="">Ec2</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/aws/lambda/" class="active">Lambda</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/aws/s3/" class="">S3</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-683f6f0ae678ece99a2caa1bc67a8eb5" class="toggle"  />
    <label for="section-683f6f0ae678ece99a2caa1bc67a8eb5" class="flex justify-between">
      <a href="/docs/azure/" class="">AZURE</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-310247f13514510bfdda8e074fdf55f3" class="toggle"  />
    <label for="section-310247f13514510bfdda8e074fdf55f3" class="flex justify-between">
      <a href="/docs/python-snippets/" class="">Python Snippets</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/python-snippets/asymetric-encryption/" class="">Asymetric Encryption</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/python-snippets/email-notifications/" class="">Email Notifications</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/python-snippets/symetric-encryption/" class="">Symetric Encryption</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/python-snippets/telegram-bot/" class="">Telegram Bot</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/"  >
        Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Lambda</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown"><h1 id="how-to-pentest-aws-lambda-functions">
  How to Pentest AWS Lambda Functions
  <a class="anchor" href="#how-to-pentest-aws-lambda-functions">#</a>
</h1>
<p>AWS Lambda is a serverless computing service that allows you to run code without provisioning or managing servers. Lambda functions can be triggered by various events, such as HTTP requests, S3 bucket changes, DynamoDB streams, etc. Lambda functions can also access other AWS services and resources through IAM roles and policies.</p>
<p>Pentesting AWS Lambda functions can be challenging, as they are ephemeral, scalable, and isolated. However, there are some techniques that can help you discover and exploit vulnerabilities in Lambda functions and their configurations.</p>
<h2 id="discovering-lambda-functions">
  Discovering Lambda Functions
  <a class="anchor" href="#discovering-lambda-functions">#</a>
</h2>
<p>One of the first steps in pentesting AWS Lambda functions is to find out which functions exist and how they are invoked. There are several ways to do this:</p>
<ul>
<li>Use the AWS CLI or SDK to list all the functions in a region: <code>aws lambda list-functions --region &lt;region&gt;</code></li>
<li>Use the AWS Management Console to browse through the functions and their triggers</li>
<li>Use tools like <a href="https://github.com/Coalfire-Research/Lambhack">Lambhack</a> or <a href="https://github.com/RhinoSecurityLabs/pacu">Pacu</a> to enumerate Lambda functions and their metadata</li>
<li>Use passive reconnaissance techniques such as DNS enumeration, subdomain scanning, web crawling, etc. to find endpoints that invoke Lambda functions</li>
<li>Use active reconnaissance techniques such as port scanning, banner grabbing, fuzzing, etc. to identify Lambda function endpoints and their parameters</li>
</ul>
<h2 id="exploiting-lambda-functions">
  Exploiting Lambda Functions
  <a class="anchor" href="#exploiting-lambda-functions">#</a>
</h2>
<p>Once you have discovered some Lambda functions and their triggers, you can try to exploit them by sending malicious inputs or requests. Some of the common attack vectors are:</p>
<ul>
<li>Injection attacks: If the Lambda function accepts user input or parameters from an event source (such as API Gateway), you can try to inject malicious code or commands that will execute on the underlying container or environment. For example, you can use <a href="https://portswigger.net/research/server-side-template-injection">Server-Side Template Injection (SSTI)</a> techniques to execute arbitrary code on a function that uses a templating engine (such as Jinja2) for rendering HTML responses.</li>
<li>Privilege escalation attacks: If the Lambda function has an IAM role attached to it that grants access to other AWS resources or services (such as S3 buckets, DynamoDB tables, EC2 instances, etc.), you can try to abuse those permissions by performing unauthorized actions on those resources or services. For example, you can use <a href="https://portswigger.net/web-security/ssrf">Server-Side Request Forgery (SSRF)</a> techniques to make requests from the function&rsquo;s container to internal AWS endpoints (such as metadata service) that will return sensitive information (such as IAM credentials) that you can use for further exploitation.</li>
<li>Denial-of-service attacks: If the Lambda function has a limited concurrency limit or timeout value set for it (which is common for cost optimization purposes), you can try to exhaust those limits by sending multiple concurrent requests or long-running requests that will prevent other legitimate requests from being processed. For example, you can use <a href="https://github.com/gkbrk/slowloris">Slowloris</a> tool to send partial HTTP requests that will keep connections open with the function&rsquo;s endpoint until it reaches its concurrency limit.</li>
</ul>
<h2 id="mitigating-risks">
  Mitigating Risks
  <a class="anchor" href="#mitigating-risks">#</a>
</h2>
<p>To prevent or reduce the impact of pentesting attacks on AWS Lambda functions, there are some best practices that should be followed by developers and administrators:</p>
<ul>
<li>Use secure coding practices and frameworks when developing Lambda functions</li>
<li>Validate and sanitize user input and parameters before processing them</li>
<li>Implement proper error handling and logging mechanisms for debugging purposes</li>
<li>Restrict access to Lambda function endpoints using authentication and authorization mechanisms (such as API keys)</li>
<li>Apply least privilege principle when assigning IAM roles and policies to Lambda functions</li>
<li>Monitor and audit Lambda function activity using CloudWatch Logs and CloudTrail</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function select(element){const selection=window.getSelection();const range=document.createRange();range.selectNodeContents(element);selection.removeAllRanges();selection.addRange(range);}
document.querySelectorAll("pre code").forEach(code=>{code.addEventListener("click",function(event){if(window.getSelection().toString()){return;}
select(code.parentElement);if(navigator.clipboard){navigator.clipboard.writeText(code.parentElement.textContent);}});});})();</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
</body>
</html>












